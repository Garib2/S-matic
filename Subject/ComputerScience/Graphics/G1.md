---
layout: content
title: Rendering Pipeline
permalink: /info/CS/Numerical/G1.md/
---

## 0.1 그래픽 처리기

1. **OpenGL 라이브러리가 정의하는 10종의 그래픽 기본도형들**
   - 점
   - 선 / 선띠 / 선 루프
   - 삼각형 / 삼각형 띠 / 삼각형 부채
   - 사각형 / 사각형 띠 / 다각형

2. **CPU와 독립적으로 명령을 수행하는 GPU**
   - CPU에서 GPU로 렌더링 명령을 보내면, GPU가 이를 수행하여 비동기적으로 작동함
   - 비동기 작업이므로, CPU는 다른 작업을 동시에 수행할 수 있음
   - OpenGL의 인터페이스를 하드웨어 추상층(HAL)이라고 하며, OpenGL 함수를 직접 구현하면 렌더링 명령의 부담이 최소화됨

3. **3차원 그래픽 카드**
   - VRAM은 GPU에 내장된 RAM으로 이미지 버퍼, 깊이/스텐실 버퍼, 텍스쳐 맵 등을 포함
   - 전면 이미지 버퍼는 뷰포트 렌더링 이미지 영역이며, 후면 이미지 버퍼는 GPU가 실제 장면을 그리는 공간
   - 렌더링이 완료되면 후면 버퍼와 전면 버퍼를 교체(buffer swap)하여 화면에 출력
   - 깊이(z) 버퍼는 객체가 화면 안쪽으로 얼마나 멀리 있는지를 나타내어 더 깊은 픽셀은 그리지 않음
   - 스텐실 버퍼는 각 픽셀에 대한 마스크를 설정하여 렌더링을 제어함
   - 텍스처 맵이 VRAM에서 가장 큰 메모리를 차지함

## 0.2 정점 변환

1. **기하 데이터가 GPU로 전달됨**
   - 2D 뷰포트에 그리기 위해 필요한 기하학적 변환 수행
   - 변환 과정: 물체 공간 → 모델-뷰 변환 → 카메라 공간(투영) → 동차 절단 공간 → 뷰포트 변환 → 윈도우 공간
   - 각 변환의 정의:
     - 물체 공간: 모형에만 쓰이는 좌표계
     - 세계 공간: 모형의 실제 위치와 방향을 나타내는 전역 좌표계
     - 카메라 공간: 화면 디스플레이와 정렬된 좌표계(eye space라고도 함)

2. **주요 변환**
   - **모델-뷰 변환 (Model-View Transformation)**: 물체 공간을 세계 공간으로, 세계 공간을 카메라 공간으로 변환하며, 이를 결합한 변환을 MVP(모델-뷰-투영) 행렬이라 함
   - **투영 변환 (Projection Transformation)**: 카메라 공간에서 정점들을 동차 공간(Homogeneous Space)으로 변환함
   - **동차 절단 공간 (Clipping in Homogeneous Space)**: NDC(Normalized Device Coordinates)로 변환되기 전 클리핑하여 시야(FOV) 내 정점만 렌더링에 사용
   - **NDC 변환 (Normalization)**: 클리핑된 정점들을 [-1, 1] 범위로 정규화하여 NDC 공간으로 변환
   - **뷰포트 변환 (Viewport Transformation)**: NDC 공간 좌표를 뷰포트 공간으로 변환하고 해상도에 맞게 픽셀 단위로 조정
   - **윈도우 공간 (Window Space)**: 뷰포트 변환 후 화면 픽셀 좌표로 변환되어 렌더링 시스템이 출력

## 0.3 래스터화와 단편 연산

1. **래스터화 (Rasterization)**
   - 정점 데이터를 픽셀 데이터로 변환하여 3D 정점이 2D 픽셀에 대응되도록 함
   - 삼각형 세분화: 클립 공간의 삼각형을 픽셀 단위로 세분화하여 각 픽셀의 위치와 색상을 결정
   - 렌더 타깃 설정: 픽셀 데이터는 프레임 버퍼에 저장되어 이후 단계에서 GPU가 처리

2. **프래그먼트 셰이더 실행 (Fragment Shader Execution)**
   - 각 프래그먼트(단편)에서 색상, 텍스처, 라이팅 등 픽셀 속성 계산
   - 깊이 검사: 셰이더에서 계산한 깊이 값을 통해 해당 픽셀이 화면의 앞쪽에 위치하는 경우에만 렌더링
   - 블렌딩: 투명 효과가 필요한 경우, 기존 화면 픽셀과 새로 계산된 픽셀 값을 혼합하여 최종 값을 계산

3. **출력 병합 (Output Merge)**
   - 최종 출력: 각 단편의 연산이 완료되면 프레임 버퍼에 저장되어 화면에 출력됨
   - 여러 출력 타깃 사용으로 그림자, 반사, 굴절 효과 등을 병합하여 출력 가능
